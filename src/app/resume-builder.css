/* Resume Builder Styles - ATS Optimized */

/* ATS-friendly typography */
.resume-container {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  max-width: 8.5in;
  height: auto;
  background-color: var(--card);
  color: var(--foreground);
  line-height: 1.5;
}

.resume-section {
  margin-bottom: 0.5rem;
  page-break-inside: avoid;
}

.resume-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 0.5rem;
  margin-bottom: 0.75rem;
}

.resume-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.resume-entry {
  margin-bottom: 0.5rem;
  page-break-inside: avoid;
}

.resume-entry-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.25rem;
}

.resume-entry-title {
  font-weight: 700;
  font-size: 0.95rem;
}

.resume-entry-subtitle {
  font-style: italic;
  color: var(--muted-foreground);
}

.resume-entry-date {
  font-weight: 600;
  color: var(--foreground);
}

.resume-entry-location {
  color: var(--muted-foreground);
  font-size: 0.9rem;
}

.resume-entry-description {
  color: var(--muted-foreground);
  font-size: 0.9rem;
  line-height: 1.4;
  margin-top: 0.25rem;
  white-space: pre-wrap;
}

.resume-skills-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.5rem;
}

.resume-skill-item {
  page-break-inside: avoid;
}

.resume-skill-category {
  font-weight: 700;
  font-size: 0.9rem;
}

.resume-skill-items {
  color: var(--muted-foreground);
  font-size: 0.9rem;
}

/* Enhanced Puck Editor Integration Styles */
.puck-editor {
  display: flex;
  height: 100vh;
  width: 100%;
}

/* Custom Puck Styling - Hide preview and enhance editor */
.puck [data-puck-preview] {
  display: none !important;
}

.puck .puck-layout {
  grid-template-columns: 240px 1fr 300px !important;
  grid-template-areas: "left editor right" !important;
}

.puck .puck-editor {
  grid-area: editor !important;
  background: var(--background) !important;
  padding: 2rem !important;
  overflow-y: auto !important;
}

/* Style the component library sidebar */
.puck .puck-layout-left {
  background: var(--card) !important;
  border-right: 1px solid var(--border) !important;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05) !important;
}

/* Style the properties sidebar */
.puck .puck-layout-right {
  background: var(--card) !important;
  border-left: 1px solid var(--border) !important;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.05) !important;
}

/* Enhance the component list */
.puck .puck-component {
  margin-bottom: 0.5rem !important;
  border-radius: 8px !important;
  border: 1px solid var(--border) !important;
  background: var(--card) !important;
  transition: all 0.2s ease !important;
}

.puck .puck-component:hover {
  border-color: var(--primary) !important;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15) !important;
}

/* Style the draggable items in editor */
.puck [data-puck-component-type] {
  border: 2px dashed transparent !important;
  border-radius: 8px !important;
  transition: all 0.2s ease !important;
  margin-bottom: 1rem !important;
}

.puck [data-puck-component-type]:hover {
  border-color: var(--primary) !important;
  background: rgba(59, 130, 246, 0.05) !important;
}

.puck [data-puck-component-type].puck-selected {
  border-color: var(--primary) !important;
  background: rgba(59, 130, 246, 0.1) !important;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2) !important;
}

/* Style form fields in properties panel */
.puck .puck-field {
  margin-bottom: 1rem !important;
}

.puck .puck-field label {
  font-weight: 600 !important;
  color: var(--foreground) !important;
  margin-bottom: 0.5rem !important;
}

.puck .puck-field input,
.puck .puck-field textarea {
  border: 1px solid var(--border) !important;
  border-radius: 6px !important;
  padding: 0.5rem !important;
  font-size: 0.875rem !important;
  transition: border-color 0.2s ease !important;
}

.puck .puck-field input:focus,
.puck .puck-field textarea:focus {
  border-color: var(--primary) !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
  outline: none !important;
}

/* Editor canvas styling */
.puck .puck-editor-canvas {
  background: var(--card) !important;
  border-radius: 8px !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  padding: 2rem !important;
  margin: 0 auto !important;
  max-width: 8.5in !important;
  min-height: 11in !important;
}

/* Print Styles for ATS Compatibility */
@media print {
  body {
    margin: 0;
    padding: 0;
    background: white;
  }

  .resume-container {
    box-shadow: none;
    max-width: 100%;
  }

  .puck-editor,
  .puck-toolbar,
  .puck-sidebar {
    display: none;
  }

  .resume-section {
    page-break-inside: avoid;
  }

  .resume-entry {
    page-break-inside: avoid;
  }

  /* Ensure text is black for better ATS scanning */
  * {
    color: #000 !important;
    background: white !important;
  }

  a {
    text-decoration: underline;
    color: #000 !important;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .resume-entry-header {
    flex-direction: column;
  }

  .resume-skills-grid {
    grid-template-columns: 1fr;
  }

  .puck .puck-layout {
    grid-template-columns: 1fr !important;
    grid-template-areas: "editor" !important;
  }

  .puck .puck-layout-left,
  .puck .puck-layout-right {
    position: fixed !important;
    top: 0 !important;
    left: -100% !important;
    z-index: 50 !important;
    transition: left 0.3s ease !important;
  }
}

/* Focus states for accessibility */
.resume-component:focus-visible {
  outline: 2px solid #4f46e5;
  outline-offset: 2px;
}

/* Custom scrollbars */
.puck .puck-layout-left::-webkit-scrollbar,
.puck .puck-layout-right::-webkit-scrollbar {
  width: 6px;
}

.puck .puck-layout-left::-webkit-scrollbar-track,
.puck .puck-layout-right::-webkit-scrollbar-track {
  background: #f1f5f9;
}

.puck .puck-layout-left::-webkit-scrollbar-thumb,
.puck .puck-layout-right::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

.puck .puck-layout-left::-webkit-scrollbar-thumb:hover,
.puck .puck-layout-right::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Dark Mode Overrides for Puck Editor */
.dark {
  /* Override Puck's grey color scale for dark mode */
  --puck-color-grey-01: oklch(0.2046 0 0); /* dark background */
  --puck-color-grey-02: oklch(0.2393 0 0); /* muted dark */
  --puck-color-grey-03: oklch(0.3715 0 0); /* border */
  --puck-color-grey-04: oklch(0.5510 0 0); /* muted foreground */
  --puck-color-grey-05: oklch(0.7155 0 0); /* light text */
  --puck-color-grey-06: oklch(0.8 0 0);    /* lighter text */
  --puck-color-grey-07: oklch(0.85 0 0);   /* very light */
  --puck-color-grey-08: oklch(0.9 0 0);    /* near white */
  --puck-color-grey-09: oklch(0.95 0 0);   /* almost white */
  --puck-color-grey-10: oklch(0.97 0 0);   /* white-ish */
  --puck-color-grey-11: oklch(0.99 0 0);   /* white */
  --puck-color-grey-12: oklch(1.0 0 0);    /* pure white -> dark background */
  --puck-color-white: oklch(0.2686 0 0);   /* card background */
  --puck-color-black: oklch(0.9219 0 0);   /* foreground text */
}

/* More aggressive Puck dark mode targeting */
.dark .puck {
  background: var(--background) !important;
  color: var(--foreground) !important;
}

/* Target Puck's internal CSS module classes with higher specificity */
.dark [class*="Puck_puck"],
.dark [class*="SidebarSection_SidebarSection"],
.dark [class*="Panel_Panel"],
.dark [class*="ComponentList_ComponentList"],
.dark [class*="Fields_Fields"] {
  background-color: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

/* Target sidebar areas specifically - both left and right panels */
.dark .puck > div:first-child,
.dark .puck > div:last-child,
.dark .puck aside,
.dark .puck nav {
  background: var(--card) !important;
  border-color: var(--border) !important;
}

/* Force all nested elements in sidebars to use dark theme */
.dark .puck > div:first-child *,
.dark .puck > div:last-child *,
.dark .puck aside *,
.dark .puck nav * {
  background-color: var(--card) !important;
  color: var(--foreground) !important;
}

/* Target Puck header/toolbar area */
.dark .puck header,
.dark .puck [role="banner"],
.dark .puck > div > div:first-child {
  background: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

/* Ultra-specific targeting for Puck layout sections */
.dark .puck [data-testid],
.dark .puck [class*="layout"],
.dark .puck [class*="Layout"],
.dark .puck [class*="sidebar"],
.dark .puck [class*="Sidebar"],
.dark .puck [class*="panel"],
.dark .puck [class*="Panel"] {
  background: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

/* Component-specific dark mode fixes */
.dark .puck [class*="ComponentItem"],
.dark .puck [role="button"],
.dark .puck button {
  background: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

.dark .puck [class*="ComponentItem"]:hover,
.dark .puck [role="button"]:hover,
.dark .puck button:hover {
  background: var(--accent) !important;
  border-color: var(--primary) !important;
}

/* Form fields and inputs */
.dark .puck input,
.dark .puck textarea,
.dark .puck select {
  background: var(--background) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

.dark .puck input:focus,
.dark .puck textarea:focus,
.dark .puck select:focus {
  border-color: var(--primary) !important;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2) !important;
}

/* Labels and text elements */
.dark .puck label,
.dark .puck span,
.dark .puck p {
  color: var(--foreground) !important;
}

/* Override any hardcoded white backgrounds */
.dark .puck [style*="background-color: rgb(255, 255, 255)"],
.dark .puck [style*="background-color: #fff"],
.dark .puck [style*="background-color: white"] {
  background-color: var(--card) !important;
}

/* Override any hardcoded black text */
.dark .puck [style*="color: rgb(0, 0, 0)"],
.dark .puck [style*="color: #000"],
.dark .puck [style*="color: black"] {
  color: var(--foreground) !important;
}

/* Ensure main editor area uses background color */
.dark .puck .puck-editor,
.dark .puck [class*="editor"],
.dark .puck [class*="canvas"],
.dark .puck [class*="frame"] {
  background: var(--background) !important;
}

/* Additional targeted fixes for Puck CSS modules */
.dark .puck * {
  --puck-color-grey-12: var(--background) !important;
  --puck-color-grey-11: var(--card) !important;
  --puck-color-grey-10: var(--card) !important;
  --puck-color-white: var(--card) !important;
  --puck-color-black: var(--foreground) !important;
}

/* Maximum specificity override for ALL Puck elements */
.dark .puck,
.dark .puck *,
.dark .puck *:before,
.dark .puck *:after {
  background-color: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

/* Specific override for the main editor canvas to use background */
.dark .puck [class*="editor"] *,
.dark .puck [class*="canvas"] *,
.dark .puck [class*="frame"] *,
.dark .puck [class*="Editor"] *,
.dark .puck [class*="Canvas"] *,
.dark .puck [class*="Frame"] * {
  background-color: var(--background) !important;
}

/* Exclude the main canvas/iframe from dark overrides */
.dark .puck iframe,
.dark .puck [class*="Render"],
.dark .puck [class*="render"],
.dark .puck [class*="Preview"],
.dark .puck [class*="preview"] {
  background-color: white !important;
  color: black !important;
}

/* Specifically target the resume content area to stay white */
.dark .puck [class*="editor"] .resume-container,
.dark .puck [class*="canvas"] .resume-container,
.dark .puck [class*="frame"] .resume-container,
.dark .puck iframe .resume-container,
.dark .resume-container {
  background-color: white !important;
  color: black !important;
}

/* Ensure resume components stay properly styled */
.dark .puck [class*="editor"] [class*="resume"],
.dark .puck [class*="canvas"] [class*="resume"],
.dark .puck [class*="frame"] [class*="resume"] {
  background-color: white !important;
  color: black !important;
}

/* Force sidebar background colors with even higher specificity */
.dark .puck > div:first-child,
.dark .puck > div:first-child *,
.dark .puck > div:last-child,
.dark .puck > div:last-child * {
  background-color: var(--card) !important;
  color: var(--foreground) !important;
}

/* Nuclear option: Override ALL background and color styles */
.dark .puck div,
.dark .puck span,
.dark .puck section,
.dark .puck article,
.dark .puck aside,
.dark .puck nav,
.dark .puck header,
.dark .puck main {
  background-color: var(--card) !important;
  color: var(--foreground) !important;
}

/* Override the nuclear option for editor content with higher specificity */
.dark .puck [class*="editor"] div,
.dark .puck [class*="editor"] span,
.dark .puck [class*="editor"] section,
.dark .puck [class*="editor"] article,
.dark .puck [class*="canvas"] div,
.dark .puck [class*="canvas"] span,
.dark .puck [class*="canvas"] section,
.dark .puck [class*="canvas"] article,
.dark .puck [class*="frame"] div,
.dark .puck [class*="frame"] span,
.dark .puck [class*="frame"] section,
.dark .puck [class*="frame"] article {
  background-color: white !important;
  color: black !important;
}

/* Target any remaining white/light elements */
.dark .puck div[style*="background"],
.dark .puck span[style*="background"],
.dark .puck section[style*="background"] {
  background-color: var(--card) !important;
}

/* Ultimate fallback using attribute selectors and highest specificity */
html.dark .puck[data-testid] *,
html.dark .puck[class] *,
html.dark .puck[id] *,
body.dark .puck *,
.dark .puck * {
  background-color: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

/* Override for editor content area with same high specificity */
html.dark .puck[data-testid] [class*="editor"] *,
html.dark .puck[class] [class*="editor"] *,
body.dark .puck [class*="editor"] *,
.dark .puck [class*="editor"] * {
  background-color: var(--background) !important;
}

/* Force override any inline styles */
.dark .puck *[style*="background-color: rgb(255"],
.dark .puck *[style*="background-color: #fff"],
.dark .puck *[style*="background-color: white"],
.dark .puck *[style*="background: rgb(255"],
.dark .puck *[style*="background: #fff"],
.dark .puck *[style*="background: white"] {
  background-color: var(--card) !important;
  background: var(--card) !important;
}

/* CSS Custom Property Override at Root Level */
.dark {
  /* Force Puck to use our color scheme */
  --puck-color-grey-01: hsl(224 71.4% 4.1%) !important;
  --puck-color-grey-02: hsl(220 14.3% 9.8%) !important;  
  --puck-color-grey-03: hsl(220 13% 18%) !important;
  --puck-color-grey-04: hsl(217.9 10.6% 64.9%) !important;
  --puck-color-grey-05: hsl(210 20% 98%) !important;
  --puck-color-grey-11: hsl(220 14.3% 9.8%) !important;
  --puck-color-grey-12: hsl(224 71.4% 4.1%) !important;
  --puck-color-white: hsl(220 14.3% 9.8%) !important;
  --puck-color-black: hsl(210 20% 98%) !important;
}

/* Final nuclear option - override EVERYTHING with maximum CSS specificity */
.dark .puck,
.dark .puck > *,
.dark .puck > * > *,
.dark .puck > * > * > *,
.dark .puck > * > * > * > *,
.dark .puck div,
.dark .puck section,
.dark .puck aside,
.dark .puck nav,
.dark .puck header,
.dark .puck main,
.dark .puck article,
.dark .puck span,
.dark .puck p,
.dark .puck h1,
.dark .puck h2,
.dark .puck h3,
.dark .puck h4,
.dark .puck h5,
.dark .puck h6 {
  background-color: var(--card) !important;
  background: var(--card) !important;
  color: var(--foreground) !important;
  border-color: var(--border) !important;
}

/* Override for main editor container to have proper background */
.dark .puck [class*="editor"],
.dark .puck [class*="Editor"],
.dark .puck [class*="canvas"], 
.dark .puck [class*="Canvas"],
.dark .puck [class*="frame"],
.dark .puck [class*="Frame"] {
  background-color: var(--background) !important;
  background: var(--background) !important;
}

/* Critical fix: Force resume content to be white with black text */
.dark .puck [class*="editor"] *,
.dark .puck [class*="Editor"] *,
.dark .puck [class*="canvas"] *,
.dark .puck [class*="Canvas"] *,
.dark .puck [class*="frame"] *,
.dark .puck [class*="Frame"] *,
.dark .puck iframe,
.dark .puck iframe * {
  background-color: white !important;
  background: white !important;
  color: black !important;
}

/* Ensure resume components maintain their styling */
.dark .resume-container,
.dark .resume-container *,
.dark [data-puck-component-type] {
  background-color: white !important;
  color: black !important;
}
